# algorithmåº“

### è¯­æ³•

å¤§å¤šæ•° `<algorithm>` ä¸­çš„å‡½æ•°éƒ½éµå¾ªä»¥ä¸‹åŸºæœ¬è¯­æ³•ï¼š

```
algorithm_name(container.begin(), container.end(), ...);
```

è¿™é‡Œçš„ `container` æ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œ`begin()` å’Œ `end()` æ˜¯å®¹å™¨çš„æˆå‘˜å‡½æ•°ï¼Œè¿”å›æŒ‡å‘å®¹å™¨å¼€å§‹å’Œç»“æŸçš„è¿­ä»£å™¨ã€‚

## å®ä¾‹

### 1. æ’åºç®—æ³•

å‡½æ•°ï¼šsort

å®šä¹‰ï¼šå¯¹å®¹å™¨ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºã€‚

è¯­æ³•ï¼š

```
sort(container.begin(), container.end(), compare_function);
```

å…¶ä¸­ compare_function æ˜¯ä¸€ä¸ªå¯é€‰çš„æ¯”è¾ƒå‡½æ•°ï¼Œç”¨äºè‡ªå®šä¹‰æ’åºæ–¹å¼ã€‚

## å®ä¾‹

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
  std::vector<int> numbers = {5, 2, 9, 1, 5, 6};
  std::sort(numbers.begin(), numbers.end());

  for (int num : numbers) {
    std::cout << num << " ";
  }
  std::cout << std::endl;

  return 0;
}
```

#### é»˜è®¤æ’åºè¡Œä¸º

- **æ’åºæ–¹å‘**ï¼š**å‡åº**ï¼ˆä»å°åˆ°å¤§ï¼‰ã€‚

- æ¯”è¾ƒè§„ï¼šé»˜è®¤ä½¿ç”¨å…ƒç´ çš„ operator<ï¼ˆå°äºè¿ç®—ç¬¦ï¼‰è¿›è¡Œæ¯”è¾ƒã€‚

  - å¦‚æœå…ƒç´ ç±»å‹ï¼ˆå¦‚ intã€std::stringï¼‰å·²å®šä¹‰ operator<ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ã€‚
  - ä¾‹å¦‚ï¼Œå¯¹ std::vector<int>{3, 1, 4, 1, 5} è°ƒç”¨ std::sort(v.begin(), v.end()) åï¼Œç»“æœä¸º {1, 1, 3, 4, 5}ã€‚
  
- **é€‚ç”¨èŒƒå›´**ï¼šå¿…é¡»æ˜¯**éšæœºè®¿é—®è¿­ä»£å™¨**ï¼ˆå¦‚ vectorã€arrayã€dequeï¼‰ï¼Œä¸æ”¯æŒ listï¼ˆç”¨ std::list::sort ä»£æ›¿ï¼‰ã€‚

- **ç¨³å®šæ€§**ï¼š**ä¸ç¨³å®š**ï¼ˆç›¸ç­‰å…ƒç´ çš„ä½ç½®å¯èƒ½æ”¹å˜ï¼‰ã€‚

### å¦‚ä½•è‡ªå®šä¹‰æ’åºç®—æ³•

std::sort æ”¯æŒé€šè¿‡**æ¯”è¾ƒå™¨ï¼ˆcomparatorï¼‰\**è‡ªå®šä¹‰æ’åºé€»è¾‘ã€‚æ¯”è¾ƒå™¨æ˜¯ä¸€ä¸ª\**äºŒå…ƒè°“è¯**ï¼ˆbinary predicateï¼‰ï¼Œå³ä¸€ä¸ªå‡½æ•°æˆ–å‡½æ•°å¯¹è±¡ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å› bool å€¼ï¼ˆè¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦â€œå°äºâ€ç¬¬äºŒä¸ªï¼‰ã€‚

```
std::sort(first, last, comp);  // comp æ˜¯å¯é€‰çš„æ¯”è¾ƒå™¨
```

- å¦‚æœä¸æä¾› compï¼Œé»˜è®¤ä½¿ç”¨ operator<ã€‚
- comp(a, b) è¿”å› true è¡¨ç¤º a åº”æ’åœ¨ b å‰é¢ã€‚

#### 2. **è‡ªå®šä¹‰æ–¹å¼**

æœ‰ä¸‰ç§å¸¸è§æ–¹æ³•ï¼šå‡½æ•°æŒ‡é’ˆã€Lambda è¡¨è¾¾å¼ã€å‡½æ•°å¯¹è±¡ï¼ˆfunctorï¼‰ã€‚

##### **æ–¹æ³•1: å‡½æ•°æŒ‡é’ˆ**

å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œç„¶åä¼ å…¥å…¶æŒ‡é’ˆã€‚

```cpp
bool descending(int a, int b) {
    return a > b;  // é™åºï¼ša > b æ—¶ a æ’åœ¨å‰é¢
}

std::sort(v.begin(), v.end(), descending);  // ç»“æœ: {5, 4, 3, 1, 1}
```

##### **æ–¹æ³•2: Lambda è¡¨è¾¾å¼ï¼ˆæ¨èï¼ŒC++11+ï¼‰**

ç®€æ´ã€å†…è”å®šä¹‰ã€‚

```cpp
std::sort(v.begin(), v.end(), [](int a, int b) {
    return a > b;  // é™åº
});
```

- æ”¯æŒæ•è·å¤–éƒ¨å˜é‡ï¼Œä¾‹å¦‚æŒ‰ç»å¯¹å€¼æ’åºï¼š

```cpp
std::sort(v.begin(), v.end(), [](int a, int b) {
    return std::abs(a) < std::abs(b);  // æŒ‰ç»å¯¹å€¼å‡åº
});
```

##### **æ–¹æ³•3: å‡½æ•°å¯¹è±¡ï¼ˆé‡è½½ operator()ï¼‰**

å®šä¹‰ä¸€ä¸ªç±»æˆ–ç»“æ„ä½“ï¼Œé‡è½½ operator()ã€‚

```cpp
struct Descending {
    bool operator()(int a, int b) const {
        return a > b;  // é™åº
    }
};

std::sort(v.begin(), v.end(), Descending{});  // ä½¿ç”¨å®ä¾‹
```

- ä¼˜ç‚¹ï¼šå¯å¤ç”¨ï¼Œä¸” const ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚

#### 3. **é«˜çº§è‡ªå®šä¹‰ç¤ºä¾‹**

- **å­—ç¬¦ä¸²æŒ‰é•¿åº¦æ’åº**ï¼š

```cpp
std::vector<std::string> words = {"apple", "a", "banana", "cat"};
std::sort(words.begin(), words.end(), [](const std::string& a, const std::string& b) {
    return a.length() < b.length();  // æŒ‰é•¿åº¦å‡åº
});
// ç»“æœ: {"a", "cat", "apple", "banana"}
```

- **å¤šæ¡ä»¶æ’åº**ï¼ˆå¦‚å…ˆæŒ‰å¹´é¾„å‡åºï¼Œå†æŒ‰å§“åé™åºï¼‰ï¼š

```cpp
struct Person {
    int age;
    std::string name;
};

std::vector<Person> people = {/* ... */};
std::sort(people.begin(), people.end(), [](const Person& a, const Person& b) {
    if (a.age != b.age) {
        return a.age < b.age;  // å…ˆæŒ‰å¹´é¾„å‡åº
    }
    return a.name > b.name;  // å†æŒ‰å§“åé™åº
});
```

### 2. æœç´¢ç®—æ³•

å‡½æ•°ï¼šfind

å®šä¹‰ï¼šåœ¨å®¹å™¨ä¸­æŸ¥æ‰¾ä¸ç»™å®šå€¼åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚

è¯­æ³•ï¼š

```
auto it = find(container.begin(), container.end(), value);
```

å¦‚æœæ‰¾åˆ°ï¼Œit å°†æŒ‡å‘åŒ¹é…çš„å…ƒç´ ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œit å°†ç­‰äº container.end()ã€‚

## å®ä¾‹

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
  std::vector<int> numbers = {1, 2, 3, 4, 5};
  auto it = std::find(numbers.begin(), numbers.end(), 3);

  if (it != numbers.end()) {
    std::cout << "Found: " << *it << std::endl;
  } else {
    std::cout << "Value not found." << std::endl;
  }

  return 0;
}
```

è¾“å‡ºç»“æœï¼š

```
Found: 3
```

**std::binary_search**: å¯¹æœ‰åºåŒºé—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚

```
std::sort(vec.begin(), vec.end());  // å…ˆæ’åº
bool found = std::binary_search(vec.begin(), vec.end(), 4);
```

**std::find_if**: æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å…ƒç´ ã€‚

```
auto it = std::find_if(vec.begin(), vec.end(), [](int x) { return x > 3; });
```

### 3. å¤åˆ¶ç®—æ³•

å‡½æ•°ï¼šcopy

å®šä¹‰ï¼šå°†ä¸€ä¸ªèŒƒå›´å†…çš„å…ƒç´ å¤åˆ¶åˆ°å¦ä¸€ä¸ªå®¹å™¨æˆ–æ•°ç»„ã€‚

è¯­æ³•ï¼š

```
copy(source_begin, source_end, destination_begin);
```

å®ä¾‹ï¼š

## å®ä¾‹

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
  std::vector<int> source = {1, 2, 3, 4, 5};
  int destination[5];
  std::copy(source.begin(), source.end(), destination);

  for (int i = 0; i < 5; ++i) {
    std::cout << destination[i] << " ";
  }
  std::cout << std::endl;

  return 0;
}
```

è¾“å‡ºç»“æœï¼š

```
1 2 3 4 5 
```

å®¹å™¨ç±»å‹ä¸åŒæ€ä¹ˆåŠï¼Ÿ

åœ¨ C++ çš„ std::copy ç®—æ³•ä¸­ï¼Œ**å®¹å™¨ç±»å‹ä¸åŒå®Œå…¨æ²¡é—®é¢˜**ï¼è¿™æ˜¯å› ä¸º std::copy æ˜¯**åŸºäºè¿­ä»£å™¨**çš„é€šç”¨ç®—æ³•ï¼Œè€Œä¸æ˜¯ä¾èµ–å…·ä½“å®¹å™¨ç±»å‹ã€‚å®ƒåªå…³å¿ƒæºèŒƒå›´çš„**è¾“å…¥è¿­ä»£å™¨**ï¼ˆInput Iteratorï¼‰å’Œç›®æ ‡èŒƒå›´çš„**è¾“å‡ºè¿­ä»£å™¨**ï¼ˆOutput Iteratorï¼‰ã€‚åªè¦è¿­ä»£å™¨æœ‰æ•ˆï¼Œç®—æ³•å°±èƒ½å·¥ä½œã€‚

#### æ ¸å¿ƒæ¡ä»¶

- **è¿­ä»£å™¨å…¼å®¹**ï¼šæºæä¾› [first, last) è¾“å…¥è¿­ä»£å™¨ï¼Œç›®æ ‡æä¾›è¾“å‡ºè¿­ä»£å™¨ï¼ˆä» d_first å¼€å§‹ï¼‰ã€‚

- å…ƒç´ å¯èµ‹å€¼ï¼šæºå…ƒç´ çš„ç±»å‹ T å¿…é¡»èƒ½èµ‹å€¼ç»™ç›®æ ‡å…ƒç´ çš„ç±»å‹ Uï¼ˆå³ U = Tæˆç«‹ï¼‰ã€‚å¦‚æœç±»å‹ä¸åŒï¼Œå¯èƒ½éœ€è¦ï¼š

  - éšå¼è½¬æ¢ï¼ˆe.g., int åˆ° doubleï¼‰ã€‚
  - æ˜¾å¼è½¬æ¢ï¼ˆä½¿ç”¨ std::transform ä»£æ›¿ std::copyï¼‰ã€‚
  
- **ç›®æ ‡ç©ºé—´**ï¼šç›®æ ‡å¿…é¡»æœ‰è¶³å¤Ÿç©ºé—´ï¼ˆè‡³å°‘ (last - first) ä¸ªå…ƒç´ ï¼‰ã€‚å¦‚æœç›®æ ‡æ˜¯åŠ¨æ€å®¹å™¨ï¼ˆå¦‚ vectorã€listï¼‰ï¼Œç”¨é€‚é…å™¨å¦‚ std::back_inserter è‡ªåŠ¨æ‰©å±•ã€‚

#### åŸºæœ¬ç¤ºä¾‹ï¼šä¸åŒå®¹å™¨ç±»å‹

ä» std::vector<int>ï¼ˆéšæœºè®¿é—®ï¼‰å¤åˆ¶åˆ° std::list<int>ï¼ˆåŒå‘ï¼‰ã€‚

```cpp
#include <algorithm>
#include <vector>
#include <list>
#include <iostream>

int main() {
    std::vector<int> source = {1, 2, 3, 4, 5};
    std::list<int> target;  // ç©ºåˆ—è¡¨ï¼Œç±»å‹ä¸åŒ

    // ä½¿ç”¨ back_inserter è‡ªåŠ¨æ‰©å±• target
    std::copy(source.begin(), source.end(), std::back_inserter(target));

    // è¾“å‡º target: 1 2 3 4 5
    for (int x : target) {
        std::cout << x << " ";  // è¾“å‡º: 1 2 3 4 5
    }
    std::cout << std::endl;

    return 0;
}
```

- **ä¸ºä»€ä¹ˆæˆåŠŸ**ï¼švector çš„ begin()/end() æ˜¯éšæœºè®¿é—®è¿­ä»£å™¨ï¼ˆå¯è½¬æ¢ä¸ºè¾“å…¥è¿­ä»£å™¨ï¼‰ï¼›list çš„ back_inserter è¿”å›ä¸€ä¸ªæ’å…¥è¿­ä»£å™¨ï¼ˆè¾“å‡ºè¿­ä»£å™¨ï¼‰ï¼Œè‡ªåŠ¨åœ¨æœ«å°¾æ’å…¥å…ƒç´ ã€‚
- **ç»“æœ**ï¼štarget ç°åœ¨æœ‰ 5 ä¸ªå…ƒç´ ï¼Œé¡ºåºç›¸åŒã€‚

#### ä¸åŒå…ƒç´ ç±»å‹ç¤ºä¾‹

ä» std::vector<int> å¤åˆ¶åˆ° std::vector<double>ï¼ˆéšå¼è½¬æ¢ï¼‰ã€‚

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
    std::vector<int> source = {1, 2, 3};
    std::vector<double> target(3);  // é¢„åˆ†é…ç©ºé—´

    std::copy(source.begin(), source.end(), target.begin());  // int -> double éšå¼è½¬æ¢

    // è¾“å‡º target: 1 2 3
    for (double x : target) {
        std::cout << x << " ";  // è¾“å‡º: 1 2 3
    }
    std::cout << std::endl;

    return 0;
}
```

- å¦‚æœè½¬æ¢å¤±è´¥

  ï¼ˆe.g., 

  int

   åˆ° 

  std::string

  ï¼‰ï¼šç¼–è¯‘é”™è¯¯æˆ–è¿è¡Œæ—¶é—®é¢˜ã€‚ç”¨ 

  std::transform

   è‡ªå®šä¹‰è½¬æ¢ï¼š

  ```cpp
  #include <string>
  std::vector<std::string> target;
  std::transform(source.begin(), source.end(), std::back_inserter(target),
                 [](int i) { return std::to_string(i); });  // è½¬æ¢: 1 -> "1"
  ```

#### é«˜çº§æŠ€å·§

1. ä½¿ç”¨é€‚é…å™¨æ‰©å±•ç›®æ ‡

   ï¼š

   - std::back_inserter(container)ï¼šåœ¨æœ«å°¾æ’å…¥ï¼ˆé€‚åˆ vectorã€listã€dequeï¼‰ã€‚

   - std::inserter(container, pos)ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥ã€‚

   - ç¤ºä¾‹ï¼šä»æ•°ç»„å¤åˆ¶åˆ° 

     deque

     ã€‚

     ```cpp
     int arr[] = {10, 20, 30};
     std::deque<int> target;
     std::copy(std::begin(arr), std::end(arr), std::back_inserter(target));
     ```

2. éƒ¨åˆ†å¤åˆ¶æˆ–æ¡ä»¶å¤åˆ¶

   ï¼š

   - ç”¨ std::copy_n å¤åˆ¶å›ºå®šæ•°é‡ï¼šstd::copy_n(source.begin(), 2, target.begin());ï¼ˆå¤åˆ¶å‰ 2 ä¸ªï¼‰ã€‚
   - æ¡ä»¶ï¼šstd::copy_if(source.begin(), source.end(), std::back_inserter(target), [](int x){ return x > 2; });ã€‚

3. æ€§èƒ½ä¸æ³¨æ„

   ï¼š

   - **æ•ˆç‡**ï¼šçº¿æ€§ O(n)ï¼Œä¸å—å®¹å™¨ç±»å‹å½±å“ï¼Œä½†åŠ¨æ€æ‰©å±•ï¼ˆå¦‚ vector::push_backï¼‰å¯èƒ½é‡åˆ†é…ã€‚
   - **é‡å èŒƒå›´**ï¼šå¦‚æœæºå’Œç›®æ ‡é‡å ï¼Œç”¨ std::copy_backwardã€‚
   - **C++17+**ï¼šç”¨ std::copy çš„æ‰§è¡Œç­–ç•¥ï¼ˆå¦‚ std::execution::parï¼‰å¹¶è¡Œå¤åˆ¶ï¼ˆéœ€ <execution>ï¼‰ã€‚
   - **æ›¿ä»£**ï¼šå¦‚æœå®¹å™¨æœ‰ assign æˆå‘˜ï¼ˆå¦‚ vector::assignï¼‰ï¼Œæœ‰æ—¶æ›´é«˜æ•ˆï¼štarget.assign(source.begin(), source.end());ã€‚

### 4. æ¯”è¾ƒç®—æ³•

å‡½æ•°ï¼šequal

å®šä¹‰ï¼šæ¯”è¾ƒä¸¤ä¸ªå®¹å™¨æˆ–ä¸¤ä¸ªèŒƒå›´å†…çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚

è¯­æ³•ï¼š

```
bool result = equal(first1, last1, first2);

æˆ–

bool result = equal(first1, last1, first2, compare_function);
```

## å®ä¾‹

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
  std::vector<int> v1 = {1, 2, 3, 4, 5};
  std::vector<int> v2 = {1, 2, 3, 4, 5};

  bool are_equal = std::equal(v1.begin(), v1.end(), v2.begin());
  std::cout << (are_equal ? "Vectors are equal." : "Vectors are not equal.") << std::endl;

  return 0;
}
```

è¾“å‡ºç»“æœï¼š

```
Vectors are equal.
```

### 5. ä¿®æ”¹ç®—æ³•

**std::reverse**: åè½¬åŒºé—´å†…çš„å…ƒç´ é¡ºåºã€‚

```
std::reverse(vec.begin(), vec.end());
```

**std::fill**: å°†æŒ‡å®šåŒºé—´å†…çš„æ‰€æœ‰å…ƒç´ èµ‹å€¼ä¸ºæŸä¸ªå€¼ã€‚

```
std::fill(vec.begin(), vec.end(), 0);  // æ‰€æœ‰å…ƒç´ è®¾ä¸º 0
```

**std::replace**: å°†åŒºé—´å†…çš„æŸä¸ªå€¼æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå€¼ã€‚

```
std::replace(vec.begin(), vec.end(), 1, 99);  // å°†æ‰€æœ‰ 1 æ›¿æ¢ä¸º 99
```

### 6.æ’åˆ—ç®—æ³•

**std::next_permutation**: ç”Ÿæˆå­—å…¸åºçš„ä¸‹ä¸€ä¸ªæ’åˆ—ï¼Œå¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªæ’åˆ—åˆ™è¿”å› falseã€‚

```
std::vector<int> vec = {1, 2, 3};
do {
    for (int n : vec) std::cout << n << " ";
    std::cout << std::endl;
} while (std::next_permutation(vec.begin(), vec.end()));
```

**std::prev_permutation**: ç”Ÿæˆå­—å…¸åºçš„ä¸Šä¸€ä¸ªæ’åˆ—ã€‚

```
std::prev_permutation(vec.begin(), vec.end());
```

### å­—å…¸åºï¼ˆLexicographical Orderï¼‰ç®€ä»‹

**å­—å…¸åº**ï¼ˆä¹Ÿç§°è¯å…¸åºï¼‰æ˜¯ä¸€ç§è‡ªç„¶çš„é¡ºåºæ’åˆ—æ–¹å¼ï¼Œå°±åƒå­—å…¸ä¸­å•è¯çš„æ’åºï¼šä»å·¦åˆ°å³é€ä½æ¯”è¾ƒå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªä¸åŒä½ç½®å†³å®šå…ˆåï¼ˆè¾ƒå°çš„å…ƒç´ åœ¨å‰ï¼‰ã€‚å¯¹äºæ•°å­—åºåˆ—æˆ–å­—ç¬¦ä¸²ï¼Œå®ƒç±»ä¼¼äº**æ•°å€¼ä»å°åˆ°å¤§**çš„æ’åºï¼Œä½†åº”ç”¨äº**æ’åˆ—ï¼ˆpermutationï¼‰**æ—¶ï¼ŒæŒ‡çš„æ˜¯æ‰€æœ‰å¯èƒ½é‡æ’çš„åºåˆ—æŒ‰è¿™ç§é¡ºåºæ’åˆ—ã€‚

- ç¤ºä¾‹

  ï¼šå¯¹äºå…ƒç´  {1, 2, 3}ï¼Œæ‰€æœ‰ 3! = 6 ä¸ªå”¯ä¸€æ’åˆ—çš„å­—å…¸åºæ˜¯ï¼š

  | æ’åˆ—ä½ç½® | åºåˆ—  | è§£é‡Šï¼ˆä¸ºä»€ä¹ˆè¿™æ ·æ’åºï¼‰               |
  | -------- | ----- | ------------------------------------ |
  | 1 (æœ€å°) | 1 2 3 | æœ€å°çš„èµ·ç‚¹ï¼ˆ1 å¼€å¤´ï¼‰ï¼Œç„¶å 2<3       |
  | 2        | 1 3 2 | 1 å¼€å¤´ï¼Œ3>2 ä½†åœ¨ 1 2 3 å            |
  | 3        | 2 1 3 | 2 å¼€å¤´ï¼ˆå¤§äº1ï¼‰ï¼Œç„¶åæœ€å°åç¼€ 1 3    |
  | 4        | 2 3 1 | 2 å¼€å¤´ï¼Œ3>1                          |
  | 5        | 3 1 2 | 3 å¼€å¤´ï¼ˆæœ€å¤§èµ·ç‚¹ï¼‰ï¼Œç„¶åæœ€å°åç¼€ 1 2 |
  | 6 (æœ€å¤§) | 3 2 1 | 3 å¼€å¤´ï¼Œæœ€å¤§åç¼€ 2>1                 |

- **å…³é”®**ï¼šå­—å…¸åºå‡è®¾å…ƒç´ æœ‰ < æ“ä½œç¬¦ï¼ˆé»˜è®¤å‡åºï¼‰ã€‚é‡å¤å…ƒç´ ï¼ˆå¦‚ {1,1,2}ï¼‰ä¼šäº§ç”Ÿè¾ƒå°‘å”¯ä¸€æ’åˆ—ï¼Œç®—æ³•è‡ªåŠ¨å¤„ç†ï¼ˆä¸é‡å¤ç”Ÿæˆï¼‰ã€‚

- **ä¸ºä»€ä¹ˆé‡è¦**ï¼šç”¨äºç”Ÿæˆæ‰€æœ‰æ’åˆ—ï¼ˆå¦‚ç»„åˆé—®é¢˜ã€æ’åºéªŒè¯ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ O(n)ï¼ˆn æ˜¯åºåˆ—é•¿åº¦ï¼‰ï¼Œä½†å…¨éå†éœ€ O(n! * n)ã€‚

### std::next_permutation ç®—æ³•

std::next_permutationï¼ˆåœ¨ <algorithm> å¤´æ–‡ä»¶ä¸­ï¼‰ç”¨äºç”Ÿæˆ**å½“å‰åºåˆ—çš„ä¸‹ä¸€ä¸ªå­—å…¸åºæ’åˆ—**ã€‚å®ƒ**å°±åœ°ä¿®æ”¹**åºåˆ—ï¼ˆin-placeï¼‰ï¼Œå¹¶è¿”å› bool å€¼è¡¨ç¤ºæ˜¯å¦æˆåŠŸç”Ÿæˆä¸‹ä¸€ä¸ªã€‚

#### è¯­æ³•

```cpp
#include <algorithm>  // å¿…é¡»åŒ…å«

bool std::next_permutation(RandomIt first, RandomIt last);
bool std::next_permutation(RandomIt first, RandomIt last, Compare comp);  // å¯é€‰è‡ªå®šä¹‰æ¯”è¾ƒå™¨
```

- å‚æ•°

  ï¼š

  - first, lastï¼šéšæœºè®¿é—®è¿­ä»£å™¨ï¼ˆRandomAccessIteratorï¼‰ï¼Œå¦‚ vectorã€arrayã€dequeï¼ˆä¸æ”¯æŒ listï¼Œå› ä¸ºéœ€è¦éšæœºè®¿é—®ï¼‰ã€‚
  - compï¼ˆå¯é€‰ï¼‰ï¼šäºŒå…ƒè°“è¯ï¼Œé»˜è®¤ç”¨ operator<ï¼ˆå‡åºå­—å…¸åºï¼‰ã€‚

- è¿”å›å€¼

  ï¼š

  - trueï¼šæˆåŠŸç”Ÿæˆä¸‹ä¸€ä¸ªæ’åˆ—ï¼ˆåºåˆ—å·²ä¿®æ”¹ï¼‰ã€‚
  - falseï¼šå½“å‰å·²æ˜¯æœ€åä¸€ä¸ªï¼ˆæœ€å¤§ï¼‰æ’åˆ—ï¼Œåˆ™**é‡ç½®åºåˆ—ä¸ºç¬¬ä¸€ä¸ªï¼ˆæœ€å°æ’åºï¼‰**ï¼Œå¹¶è¿”å› falseã€‚

- è¡Œä¸º

  ï¼š

  1. ä»å³å¾€å·¦æ‰¾ç¬¬ä¸€ä¸ªâ€œéé€’å¢â€ä½ç½® iï¼ˆå³ a[i] < a[i+1] ä¸æˆç«‹çš„æœ€åä¸€ä¸ª iï¼‰ã€‚
  2. å¦‚æœæ— ï¼ˆå…¨é€’å¢ï¼Œå¦‚ 1 2 3ï¼‰ï¼Œåˆ™æ˜¯æœ€åä¸€ä¸ªï¼Œé‡ç½®ä¸ºæœ€å°ã€‚
  3. å¦åˆ™ï¼Œä» i+1 åˆ°æœ«å°¾æ‰¾å¤§äº a[i] çš„æœ€å°å…ƒç´  jï¼Œäº¤æ¢ a[i] å’Œ a[j]ã€‚
  4. åè½¬ i+1 åˆ°æœ«å°¾ï¼Œä½¿å…¶æˆä¸ºæœ€å°åç¼€ã€‚

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œç©ºé—´ O(1)ã€‚

- **æ³¨æ„**ï¼šè¾“å…¥åºåˆ—åº”**é¢„å…ˆæŒ‰å­—å…¸åºæ’åº**ï¼ˆä»å°åˆ°å¤§ï¼‰ï¼Œå¦åˆ™ä»ä¸­é—´å¼€å§‹ç”Ÿæˆã€‚æ”¯æŒè‡ªå®šä¹‰ compï¼ˆå¦‚é™åºï¼šç”¨ greater<T>ï¼‰ã€‚

#### ç¤ºä¾‹ï¼ˆä½ çš„ä»£ç ï¼‰

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
    std::vector<int> vec = {1, 2, 3};  // åˆå§‹ï¼šæœ€å°æ’åˆ—
    do {
        for (int n : vec) std::cout << n << " ";  // è¾“å‡ºå½“å‰
        std::cout << std::endl;
    } while (std::next_permutation(vec.begin(), vec.end()));  // ç”Ÿæˆä¸‹ä¸€ä¸ªï¼Œå¾ªç¯ç›´åˆ° false

    // è¾“å‡ºï¼ˆå…¨ 6 ä¸ªæ’åˆ—ï¼ŒæŒ‰å­—å…¸åºï¼‰ï¼š
    // 1 2 3
    // 1 3 2
    // 2 1 3
    // 2 3 1
    // 3 1 2
    // 3 2 1
    // ï¼ˆç„¶åé‡ç½®ä¸º 1 2 3ï¼Œè¿”å› falseï¼Œé€€å‡ºå¾ªç¯ï¼‰
    return 0;
}
```

- **è§£é‡Š**ï¼šdo-while ç¡®ä¿å…ˆè¾“å‡ºåˆå§‹ï¼Œç„¶åç”Ÿæˆä¸‹ä¸€ä¸ªã€‚å¾ªç¯ç»“æŸåï¼Œvec è¢«é‡ç½®ä¸º {1,2,3}ã€‚

#### è‡ªå®šä¹‰æ¯”è¾ƒå™¨ç¤ºä¾‹ï¼ˆé™åºå­—å…¸åºï¼‰

```cpp
std::vector<int> vec = {3, 2, 1};  // åˆå§‹ï¼šæœ€å¤§ï¼ˆé™åºï¼‰
std::sort(vec.begin(), vec.end(), std::greater<int>());  // ç¡®ä¿èµ·å§‹ä¸ºâ€œæœ€å°â€ï¼ˆ3 2 1ï¼‰
do {
    // è¾“å‡ºä»å¤§åˆ°å°ï¼š3 2 1, 3 1 2, 2 3 1 ç­‰
} while (std::next_permutation(vec.begin(), vec.end(), std::greater<int>()));
```

### std::prev_permutation ç®—æ³•

std::prev_permutation æ˜¯ next_permutation çš„**åå‘ç‰ˆæœ¬**ï¼šç”Ÿæˆ**å½“å‰åºåˆ—çš„ä¸Šä¸€ä¸ªå­—å…¸åºæ’åˆ—**ã€‚åŒæ ·å°±åœ°ä¿®æ”¹ï¼Œå¹¶è¿”å› boolã€‚

#### è¯­æ³•

```cpp
bool std::prev_permutation(RandomIt first, RandomIt last);
bool std::prev_permutation(RandomIt first, RandomIt last, Compare comp);
```

- **å‚æ•°/è¿”å›å€¼**ï¼šä¸ next_permutation ç›¸åŒã€‚

- è¡Œä¸º

  ï¼ˆé•œåƒ nextï¼‰ï¼š

  1. ä»å³å¾€å·¦æ‰¾ç¬¬ä¸€ä¸ªâ€œéé€’å‡â€ä½ç½® iï¼ˆå³ a[i] > a[i+1] ä¸æˆç«‹çš„æœ€åä¸€ä¸ª iï¼‰ã€‚
  2. å¦‚æœæ— ï¼ˆå…¨é€’å‡ï¼Œå¦‚ 3 2 1ï¼‰ï¼Œåˆ™æ˜¯ç¬¬ä¸€ä¸ªï¼Œé‡ç½®ä¸ºæœ€å¤§ã€‚
  3. å¦åˆ™ï¼Œä» i+1 åˆ°æœ«å°¾æ‰¾å°äº a[i] çš„æœ€å¤§å…ƒç´  jï¼Œäº¤æ¢ a[i] å’Œ a[j]ã€‚
  4. åè½¬ i+1 åˆ°æœ«å°¾ï¼Œä½¿å…¶æˆä¸ºæœ€å¤§åç¼€ã€‚

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œç©ºé—´ O(1)ã€‚

- **æ³¨æ„**ï¼šè¾“å…¥åº”**é¢„å…ˆæŒ‰å­—å…¸åºåå‘æ’åº**ï¼ˆä»å¤§åˆ°å°ï¼‰ï¼Œä»¥ä»æœ€å¤§å¼€å§‹ç”Ÿæˆã€‚è‡ªå®šä¹‰ comp ç±»ä¼¼ã€‚

#### ç¤ºä¾‹

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
    std::vector<int> vec = {3, 2, 1};  // åˆå§‹ï¼šæœ€å¤§æ’åˆ—
    do {
        for (int n : vec) std::cout << n << " ";
        std::cout << std::endl;
    } while (std::prev_permutation(vec.begin(), vec.end()));  // ç”Ÿæˆä¸Šä¸€ä¸ª

    // è¾“å‡ºï¼ˆåå‘å­—å…¸åºï¼‰ï¼š
    // 3 2 1
    // 3 1 2
    // 2 3 1
    // 2 1 3
    // 1 3 2
    // 1 2 3
    // ï¼ˆç„¶åé‡ç½®ä¸º 3 2 1ï¼Œè¿”å› falseï¼‰
    return 0;
}
```

- **è§£é‡Š**ï¼šä»æœ€å¤§å¼€å§‹ï¼Œé€æ­¥ç”Ÿæˆâ€œä¸Šä¸€ä¸ªâ€ï¼ˆå®é™…æ˜¯å­—å…¸åºå€’åºï¼‰ã€‚ç»“æŸåï¼Œé‡ç½®ä¸ºæœ€å¤§ã€‚

### æ€»ç»“æ¯”è¾ƒ

| æ–¹é¢           | std::next_permutation        | std::prev_permutation        |
| -------------- | ---------------------------- | ---------------------------- |
| **æ–¹å‘**       | ä¸‹ä¸€ä¸ªï¼ˆå‡åºæ–¹å‘ï¼‰           | ä¸Šä¸€ä¸ªï¼ˆé™åºæ–¹å‘ï¼‰           |
| **èµ·å§‹å‡è®¾**   | åºåˆ—é¢„æ’åºä¸ºæœ€å°ï¼ˆä»å°åˆ°å¤§ï¼‰ | åºåˆ—é¢„æ’åºä¸ºæœ€å¤§ï¼ˆä»å¤§åˆ°å°ï¼‰ |
| **ç»“æŸæ—¶é‡ç½®** | ä¸ºæœ€å°ï¼Œè¿”å› false           | ä¸ºæœ€å¤§ï¼Œè¿”å› false           |
| **å…¸å‹ç”¨ä¾‹**   | ç”Ÿæˆæ‰€æœ‰æ’åˆ—ï¼ˆä»å°åˆ°å¤§éå†ï¼‰ | ç”Ÿæˆæ‰€æœ‰æ’åˆ—ï¼ˆä»å¤§åˆ°å°éå†ï¼‰ |
| **è‡ªå®šä¹‰**     | ç”¨ comp æ”¹å˜åºï¼ˆå¦‚é™åºï¼‰     | åŒå·¦                         |

### 7. å½’å¹¶ç®—æ³•

**std::merge**: å°†ä¸¤ä¸ªæœ‰åºåŒºé—´åˆå¹¶åˆ°ä¸€ä¸ªæœ‰åºåŒºé—´ã€‚

```
std::vector<int> vec1 = {1, 3, 5};
std::vector<int> vec2 = {2, 4, 6};
std::vector<int> result(6);
std::merge(vec1.begin(), vec1.end(), vec2.begin(), vec2.end(), result.begin());
```

**std::inplace_merge**: åœ¨å•ä¸ªåŒºé—´ä¸­åˆå¹¶ä¸¤ä¸ªæœ‰åºå­åŒºé—´ã€‚

```
std::inplace_merge(vec.begin(), middle, vec.end());
```

1ã€å¦‚æœä¸€å¼€å§‹ä¸¤ä¸ªåŒºé—´ä¸æœ‰åºä¼šæ€ä¹ˆæ ·ï¼Ÿ

**å…³é”®ç‚¹**ï¼šè¿™äº›ç®—æ³•**ä¸è‡ªåŠ¨æ’åº**ï¼å®ƒä»¬ä¸¥æ ¼å‡è®¾è¾“å…¥èŒƒå›´å·²ç»æœ‰åºã€‚å¦‚æœè¾“å…¥æ— åºï¼Œç®—æ³•ä¼šæŒ‰ç…§â€œæœ‰åºâ€é€»è¾‘é€ä¸ªæ¯”è¾ƒå’Œæ”¾ç½®å…ƒç´ ï¼Œå¯¼è‡´**ç»“æœä¸æ­£ç¡®**ï¼ˆè¾“å‡ºå¯èƒ½éƒ¨åˆ†æœ‰åºã€ä¹±åºæˆ–é‡å¤ï¼‰ã€‚è¿™æ˜¯å¸¸è§é”™è¯¯ï¼šç®—æ³•ä¸ä¼šæŠ›å¼‚å¸¸ï¼Œè€Œæ˜¯äº§ç”Ÿâ€œå®‰é™çš„â€é”™è¯¯ï¼ˆsilent failureï¼‰ã€‚

#### ä¸ºä»€ä¹ˆä¼šå‡ºé”™ï¼Ÿ

- std::merge å’Œ std::inplace_merge ä½¿ç”¨äºŒåˆ†é€‰æ‹©ï¼ˆä»ä¸¤ä¸ªèŒƒå›´å–è¾ƒå°å¤´å…ƒç´ æ”¾å…¥è¾“å‡ºï¼‰ï¼Œä¾èµ–æœ‰åºæ€§ã€‚
- æ— åºæ—¶ï¼šå–é”™å…ƒç´ é¡ºåºï¼Œå¯¼è‡´è¾“å‡ºä¸æ˜¯å…¨å±€æœ‰åºã€‚

### 8. é›†åˆç®—æ³•

**std::set_union**: è®¡ç®—ä¸¤ä¸ªæœ‰åºé›†åˆçš„å¹¶é›†ã€‚

```
std::vector<int> result(10);
auto it = std::set_union(vec1.begin(), vec1.end(), vec2.begin(), vec2.end(), result.begin());
result.resize(it - result.begin());
```

**std::set_intersection**: è®¡ç®—ä¸¤ä¸ªæœ‰åºé›†åˆçš„äº¤é›†ã€‚

```
auto it = std::set_intersection(vec1.begin(), vec1.end(), vec2.begin(), vec2.end(), result.begin());
result.resize(it - result.begin());
```

**std::set_difference**: è®¡ç®—é›†åˆçš„å·®é›†ã€‚

```
auto it = std::set_difference(vec1.begin(), vec1.end(), vec2.begin(), vec2.end(), result.begin());
result.resize(it - result.begin());
```

ä¸ºä»€ä¹ˆå¼ºè°ƒæœ‰åºï¼Ÿ

è¿™äº›ç®—æ³•**ä¸¥æ ¼è¦æ±‚è¾“å…¥èŒƒå›´å·²æ’åº**ï¼ˆé»˜è®¤å‡åºï¼‰ï¼ŒåŸå› å¦‚ä¸‹ï¼š

1. ç®—æ³•åŸç†ï¼ˆå½’å¹¶å¼å®ç°ï¼‰

   ï¼š

   - å®ƒä»¬ä½¿ç”¨

     åŒæŒ‡é’ˆå½’å¹¶ï¼ˆtwo-pointer mergeï¼‰

     ï¼šä»ä¸¤ä¸ªèŒƒå›´çš„å¼€å¤´å¼€å§‹ï¼Œé€ä¸€æ¯”è¾ƒå½“å‰å¤´å…ƒç´ ï¼ˆç”¨ 

     <

      åˆ¤æ–­ï¼‰ã€‚

     - **å¹¶é›†**ï¼šå–è¾ƒå°çš„ä¸€ä¸ªï¼ˆæˆ–ä¸¤è€…éƒ½å–ï¼Œå¦‚æœä¸ç›¸ç­‰ï¼‰ï¼›ç›¸ç­‰æ—¶å–ä¸€ä¸ªï¼ˆå»é‡ï¼‰å¹¶æ¨è¿›ä¸¤è€…ã€‚
     - **äº¤é›†**ï¼šåªå–ç›¸ç­‰å…ƒç´ ï¼Œå¹¶æ¨è¿›ä¸¤è€…ã€‚
     - **å·®é›†**ï¼šå–ç¬¬ä¸€ä¸ªèŒƒå›´ä¸­ < ç¬¬äºŒä¸ªå¤´å…ƒç´ çš„å…ƒç´ ï¼Œæ¨è¿›ç¬¬ä¸€ä¸ªï¼›ç›¸ç­‰æ—¶è·³è¿‡ç¬¬ä¸€ä¸ªã€‚

   - è¿™ä¾èµ–æœ‰åºæ€§ï¼šæŒ‡é’ˆåªèƒ½**å•å‘æ¨è¿›**ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼Œç¡®ä¿æ¯”è¾ƒçš„å…ƒç´ æ˜¯â€œå½“å‰æœ€å°â€ã€‚ç±»ä¼¼äºå½’å¹¶æ’åºçš„åˆå¹¶æ­¥éª¤ã€‚

   - å¦‚æœæ— åºï¼ŒæŒ‡é’ˆæ¨è¿›é€»è¾‘å¤±æ•ˆï¼Œæ— æ³•æ­£ç¡®è¯†åˆ«â€œæœ€å°â€æˆ–â€œåŒ…å«â€å…³ç³»ã€‚

2. æ•ˆç‡

   ï¼š

   - æœ‰åºè¾“å…¥ï¼šO(n) çº¿æ€§æ—¶é—´ï¼ˆå•æ¬¡éå†ï¼‰ã€‚
   - æ— åºï¼šéœ€å…ˆ std::sortï¼ˆO(n log n)ï¼‰ï¼Œæ€»å¤æ‚åº¦æ›´é«˜ã€‚ä½† STL ä¸å†…ç½®æ’åºæ­¥éª¤ï¼Œä»¥ä¿æŒé€šç”¨æ€§å’Œæ€§èƒ½ã€‚

3. è¯­ä¹‰æ­£ç¡®æ€§

   ï¼š

   - â€œé›†åˆâ€æ¦‚å¿µéšå«æ— åºï¼Œä½† STL è¿™äº›ç®—æ³•é’ˆå¯¹**æœ‰åºé›†åˆ**ï¼ˆå¦‚ std::setï¼‰ï¼Œç¡®ä¿è¾“å‡ºä¹Ÿæ’åºã€‚æ— åºæ—¶ï¼Œè¾“å‡ºå¯èƒ½ä¹±åºæˆ–é—æ¼ã€‚

4. è®¾è®¡å“²å­¦

   ï¼š

   - STL é¼“åŠ±**ç»„åˆä½¿ç”¨**ï¼šå…ˆ sortï¼Œå†é›†åˆè¿ç®—ã€‚é€‚ç”¨äºå…³è”å®¹å™¨ï¼ˆå¦‚ set çš„è¿­ä»£å™¨å¤©ç„¶æœ‰åºï¼‰ã€‚

### æ— åºè¾“å…¥æœ‰é—®é¢˜å—ï¼Ÿ

**æ˜¯çš„ï¼Œæœ‰ä¸¥é‡é—®é¢˜**ï¼ç®—æ³•ä¸ä¼šè‡ªåŠ¨æ’åºæˆ–æ£€æŸ¥æœ‰åºæ€§ã€‚å¦‚æœè¾“å…¥æ— åºï¼š

- **ç»“æœä¸æ­£ç¡®**ï¼šè¾“å‡ºå¯èƒ½åŒ…å«é”™è¯¯å…ƒç´ ã€é‡å¤ã€é—æ¼ï¼Œæˆ–ä¹±åºï¼ˆè¿åé›†åˆè¯­ä¹‰ï¼‰ã€‚
- **æ— å¼‚å¸¸**ï¼šå®‰é™å¤±è´¥ï¼ˆsilent failureï¼‰ï¼Œè¿è¡Œæ­£å¸¸ä½†é€»è¾‘é”™ã€‚
- **æ€§èƒ½æµªè´¹**ï¼šä» O(n) æ‰§è¡Œï¼Œä½†ç»“æœæ— æ•ˆã€‚

### 9. å…¶ä»–æœ‰ç”¨ç®—æ³•

***\*std::accumulate\**ï¼ˆéœ€è¦ <numeric> åº“ï¼‰**ï¼šè®¡ç®—èŒƒå›´å†…å…ƒç´ çš„ç´¯è®¡å’Œã€‚

```
#include <numeric>
int sum = std::accumulate(vec.begin(), vec.end(), 0);
```

æœ€åä¸€ä¸ªå‚æ•°æ˜¯åç§»é‡

**std::for_each**: å¯¹åŒºé—´å†…çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œã€‚

```
std::for_each(vec.begin(), vec.end(), [](int& x) { x += 1; });
```

**std::min_element** å’Œ **std::max_element**: æŸ¥æ‰¾åŒºé—´å†…çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚

```
auto min_it = std::min_element(vec.begin(), vec.end());
auto max_it = std::max_element(vec.begin(), vec.end());
```

# 2.iteratoråº“

C++ æ ‡å‡†åº“ä¸­çš„ `<iterator>` å¤´æ–‡ä»¶æä¾›äº†ä¸€ç»„å·¥å…·ï¼Œç”¨äºéå†å®¹å™¨ä¸­çš„å…ƒç´ ã€‚è¿­ä»£å™¨æ˜¯ C++ æ ‡å‡†æ¨¡æ¿åº“ï¼ˆSTLï¼‰ä¸­çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œå®ƒå…è®¸ç¨‹åºå‘˜ä»¥ç»Ÿä¸€çš„æ–¹å¼è®¿é—®å®¹å™¨ä¸­çš„å…ƒç´ ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå®¹å™¨çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚

è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹æ³•æ¥éå†å®¹å™¨ä¸­çš„å…ƒç´ ã€‚è¿­ä»£å™¨å¯ä»¥è¢«è§†ä¸ºæŒ‡å‘å®¹å™¨ä¸­å…ƒç´ çš„æŒ‡é’ˆï¼Œä½†å®ƒæ¯”æŒ‡é’ˆæ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚è¿­ä»£å™¨å¯ä»¥ç”¨äºè®¿é—®ã€ä¿®æ”¹å®¹å™¨ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥ä¸ STL ç®—æ³•ä¸€èµ·ä½¿ç”¨ã€‚

è¿­ä»£å™¨ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

1. **è¾“å…¥è¿­ä»£å™¨ï¼ˆInput Iteratorï¼‰**ï¼šåªèƒ½è¿›è¡Œå•æ¬¡è¯»å–æ“ä½œï¼Œä¸èƒ½è¿›è¡Œå†™å…¥æ“ä½œã€‚
2. **è¾“å‡ºè¿­ä»£å™¨ï¼ˆOutput Iteratorï¼‰**ï¼šåªèƒ½è¿›è¡Œå•æ¬¡å†™å…¥æ“ä½œï¼Œä¸èƒ½è¿›è¡Œè¯»å–æ“ä½œã€‚
3. **æ­£å‘è¿­ä»£å™¨ï¼ˆForward Iteratorï¼‰**ï¼šå¯ä»¥è¿›è¡Œè¯»å–å’Œå†™å…¥æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥å‘å‰ç§»åŠ¨ã€‚
4. **åŒå‘è¿­ä»£å™¨ï¼ˆBidirectional Iteratorï¼‰**ï¼šé™¤äº†å¯ä»¥è¿›è¡Œæ­£å‘è¿­ä»£å™¨çš„æ‰€æœ‰æ“ä½œå¤–ï¼Œè¿˜å¯ä»¥å‘åç§»åŠ¨ã€‚
5. **éšæœºè®¿é—®è¿­ä»£å™¨ï¼ˆRandom Access Iteratorï¼‰**ï¼šé™¤äº†å¯ä»¥è¿›è¡ŒåŒå‘è¿­ä»£å™¨çš„æ‰€æœ‰æ“ä½œå¤–ï¼Œè¿˜å¯ä»¥è¿›è¡Œéšæœºè®¿é—®ï¼Œä¾‹å¦‚é€šè¿‡ä¸‹æ ‡è®¿é—®å…ƒç´ ã€‚

## ä½ å¸¸ç”¨çš„ `for(auto it = ...; ++it)` å®é™…ä¸Šéšè—äº†è¿™äº›ç±»å‹

æˆ‘ä»¬æ¥çœ‹ä¸åŒå®¹å™¨çš„ä¾‹å­ğŸ‘‡

### 1ï¸âƒ£ `std::vector`

```
std::vector<int> v;
auto it = v.begin(); // éšæœºè®¿é—®è¿­ä»£å™¨
it += 5;  // âœ… å¯ä»¥ç›´æ¥è·³ 5 ä¸ªä½ç½®
```

ğŸ‘‰ æ‰€ä»¥ `vector` çš„ `iterator` æ˜¯ **Random Access Iterator**ã€‚
 å› ä¸ºå®ƒçš„åº•å±‚æ˜¯æ•°ç»„ï¼Œæ”¯æŒéšæœºè®¿é—®ã€‚

------

### 2ï¸âƒ£ `std::list`

```
std::list<int> lst;
auto it = lst.begin(); 
--it;   // âœ… å¯ä»¥å¾€åé€€
it += 5; // âŒ ä¸è¡Œï¼Œä¸èƒ½ç›´æ¥è·³
```

ğŸ‘‰ æ‰€ä»¥ `list` çš„ `iterator` æ˜¯ **Bidirectional Iterator**ã€‚
 å®ƒæ”¯æŒå‰åç§»åŠ¨ï¼Œä½†ä¸èƒ½è·³ï¼Œå› ä¸ºåº•å±‚æ˜¯é“¾è¡¨ã€‚

------

### 3ï¸âƒ£ `std::forward_list`

```
std::forward_list<int> flst;
auto it = flst.begin();
++it;  // âœ… å¯ä»¥å¾€å‰
--it;  // âŒ ä¸è¡Œï¼Œä¸èƒ½å›å¤´
```

ğŸ‘‰ å®ƒçš„è¿­ä»£å™¨æ˜¯ **Forward Iterator**ï¼Œåªèƒ½å‰è¿›ã€‚
 ï¼ˆå•å‘é“¾è¡¨å˜›ï¼‰

------

### 4ï¸âƒ£ è¾“å…¥è¾“å‡ºæµè¿­ä»£å™¨

```
std::istream_iterator<int> in(std::cin);
std::ostream_iterator<int> out(std::cout, " ");
```

ğŸ‘‰ è¾“å…¥æµåªèƒ½â€œè¯»ä¸€æ¬¡â€ï¼›è¾“å‡ºæµåªèƒ½â€œå†™ä¸€æ¬¡â€ã€‚
 å®ƒä»¬åˆ†åˆ«æ˜¯ **Input** å’Œ **Output Iterator**ã€‚

------

## âš™ï¸ å››ã€æ ‡å‡†åº“ç®—æ³•ä¸ºä»€ä¹ˆå…³å¿ƒè¿™ä¸ª

STL ç®—æ³•çš„æ¨¡æ¿å‚æ•°ä¸€èˆ¬å†™æˆï¼š

```
template <class RandomAccessIterator>
void sort(RandomAccessIterator first, RandomAccessIterator last);
```

æ³¨æ„ï¼šè¿™é‡Œå†™çš„æ˜¯ **RandomAccessIterator**ï¼Œ
 æ„å‘³ç€ `std::sort()` åªèƒ½ç”¨äºéšæœºè®¿é—®è¿­ä»£å™¨ï¼ˆ`vector`, `array`, `deque`ï¼‰ï¼Œ
 **ä¸èƒ½**ç”¨äº `list` æˆ– `forward_list`ã€‚

è¿™å°±æ˜¯è¿­ä»£å™¨â€œç±»å‹åŒºåˆ†â€çš„çœŸæ­£æ„ä¹‰ï¼š

> ğŸ‘‰ è®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸå°±çŸ¥é“æŸä¸ªç®—æ³•æ˜¯å¦èƒ½ä½œç”¨åœ¨è¿™ä¸ªå®¹å™¨ä¸Šã€‚

------

## ğŸ“¦ äº”ã€ä¸€å¥è¯ç†è§£ï¼š

> è¿­ä»£å™¨çš„äº”ç§ç±»å‹ä¸æ˜¯è®©ä½ æ‰‹åŠ¨åŒºåˆ†çš„ï¼Œ
> è€Œæ˜¯è®© **æ ‡å‡†åº“ç®—æ³•** çŸ¥é“â€œå®ƒèƒ½å¯¹å®¹å™¨åšå“ªäº›æ“ä½œâ€ã€‚

ä½ åªéœ€è¦è®°å¾—ï¼š

- æ—¥å¸¸éå†æ—¶ï¼Œ`auto it = c.begin()` å°±è¡Œï¼›
- ä¸åŒå®¹å™¨çš„è¿­ä»£å™¨â€œèƒ½åŠ›â€ä¸åŒï¼›
- ä¸€äº›ç®—æ³•ï¼ˆå¦‚ `sort`, `reverse`ï¼‰åªæ¥å—ç‰¹å®šèƒ½åŠ›ç­‰çº§çš„è¿­ä»£å™¨ã€‚

# 3.`functional`åº“

C++ æ ‡å‡†åº“ä¸­çš„ `<functional>` å¤´æ–‡ä»¶æä¾›äº†ä¸€ç»„å‡½æ•°æ¨¡æ¿ï¼Œè¿™äº›æ¨¡æ¿å…è®¸æˆ‘ä»¬ä½¿ç”¨å‡½æ•°å¯¹è±¡ï¼ˆfunction objectsï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç®—æ³•ï¼Œæˆ–è€…ä½œä¸ºç®—æ³•çš„è¿”å›å€¼ã€‚å‡½æ•°å¯¹è±¡æ˜¯é‚£äº›é‡è½½äº† `operator()` çš„å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥åƒæ™®é€šå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ã€‚

åœ¨ C++ ä¸­ï¼Œå‡½æ•°å¯¹è±¡æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œå®ƒé‡è½½äº† `operator()` æ¥å…è®¸å¯¹è±¡åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å°†è¡Œä¸ºä½œä¸ºå¯¹è±¡ä¼ é€’ï¼Œå¢åŠ äº†ä»£ç çš„çµæ´»æ€§å’Œå¯é‡ç”¨æ€§ã€‚

## å¸¸ç”¨å‡½æ•°å¯¹è±¡

`<functional>` å¤´æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„å‡½æ•°å¯¹è±¡ï¼ŒåŒ…æ‹¬ï¼š

- `std::function`ï¼šä¸€ä¸ªé€šç”¨çš„å¤šæ€å‡½æ•°å°è£…å™¨ã€‚
- `std::bind`ï¼šç”¨äºç»‘å®šå‡½æ•°çš„å‚æ•°ã€‚
- `std::plus`ã€`std::minus`ã€`std::multiplies`ã€`std::divides`ã€`std::modulus`ï¼šåŸºæœ¬çš„ç®—æœ¯æ“ä½œã€‚
- `std::equal_to`ã€`std::not_equal_to`ã€`std::greater`ã€`std::less`ã€`std::greater_equal`ã€`std::less_equal`ï¼šæ¯”è¾ƒæ“ä½œã€‚
- `std::unary_negate`ã€`std::binary_negate`ï¼šé€»è¾‘å¦å®šæ“ä½œã€‚
- `std::logical_and`ã€`std::logical_or`ã€`std::logical_not`ï¼šé€»è¾‘æ“ä½œã€‚

## ğŸ§­ ä¸€è§ˆè¡¨

| åŠŸèƒ½ç±»åˆ«         | ç¤ºä¾‹                                                      | æ˜¯å¦è¢« Lambda å–ä»£ | æ˜¯å¦ä»å¸¸ç”¨             | è¯´æ˜                                                         |
| ---------------- | --------------------------------------------------------- | ------------------ | ---------------------- | ------------------------------------------------------------ |
| **é€šç”¨å‡½æ•°å°è£…** | `std::function`                                           | âŒ å¦               | âœ… æ˜¯                   | Lambda å¸¸é…åˆå®ƒä½¿ç”¨ï¼Œå®ƒæ˜¯ Lambda çš„â€œå®¹å™¨â€                    |
| **å‡½æ•°ç»‘å®š**     | `std::bind`                                               | âœ… åŸºæœ¬è¢«å–ä»£       | âš ï¸ å¶å°”ä½¿ç”¨             | Lambda æ›´ç›´è§‚ï¼›Bind åªåœ¨æ—§ä»£ç æˆ–ç‰¹æ®Šæ¥å£ä¸­å‡ºç°               |
| **ç®—æœ¯æ“ä½œ**     | `std::plus`, `std::minus` ç­‰                              | âœ… æ˜¯               | âš ï¸ è¾ƒå°‘ç”¨               | Lambda å†™èµ·æ¥æ›´æ¸…æ™°ï¼Œä¾‹å¦‚ `[](int a, int b){ return a + b; }` |
| **æ¯”è¾ƒæ“ä½œ**     | `std::less`, `std::greater` ç­‰                            | âš ï¸ éƒ¨åˆ†å–ä»£         | âœ… ä»å¸¸ç”¨               | åœ¨æ’åºã€å®¹å™¨æ¯”è¾ƒæ—¶ä»å¾ˆå¸¸è§ï¼Œå¦‚ `std::map<int,int, std::greater<int>>` |
| **é€»è¾‘æ“ä½œ**     | `std::logical_and`, `std::logical_or`, `std::logical_not` | âœ… æ˜¯               | âš ï¸ å‡ ä¹åªåœ¨æ³›å‹æ¨¡æ¿ä¸­ç”¨ |                                                              |
| **é€»è¾‘å¦å®š**     | `std::unary_negate`, `std::binary_negate`                 | âœ… å®Œå…¨è¢«å–ä»£       | âŒ ä¸å†ä½¿ç”¨             | å·²è¿‡æ—¶ï¼ˆC++11 èµ·æ¨èç”¨ lambdaï¼‰                              |

å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼š

> æä¾›**å‡½æ•°å¯¹è±¡ï¼ˆfunction objectsï¼‰**ã€**å‡½æ•°é€‚é…å™¨ï¼ˆfunction adaptersï¼‰**ã€**ç»‘å®šå·¥å…·ï¼ˆbindï¼‰**ã€**é€šç”¨å‡½æ•°åŒ…è£…å™¨ï¼ˆstd::functionï¼‰**ç­‰ï¼Œç”¨æ¥è®©â€œå‡½æ•°â€è¿™ç§æ¦‚å¿µåœ¨ C++ ä¸­å¯ä»¥åƒâ€œå˜é‡â€ä¸€æ ·è¢«ä¼ é€’ã€å­˜å‚¨ã€ç»„åˆå’Œè°ƒç”¨ã€‚

### ä½¿ç”¨ `std::function`

`std::function` æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œå¯ä»¥å­˜å‚¨ã€è°ƒç”¨å’Œå¤åˆ¶ä»»ä½•å¯è°ƒç”¨å¯¹è±¡ï¼Œæ¯”å¦‚å‡½æ•°ã€lambda è¡¨è¾¾å¼æˆ–å‡½æ•°å¯¹è±¡ã€‚

é€šä¿—è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œç›’å­â€ï¼Œå¯ä»¥ä¿å­˜**ä»»æ„ç±»å‹çš„å¯è°ƒç”¨å¯¹è±¡**ï¼ˆæ™®é€šå‡½æ•°ã€å‡½æ•°æŒ‡é’ˆã€lambdaã€å‡½æ•°å¯¹è±¡ã€æˆå‘˜å‡½æ•°ç»‘å®šä½“ç­‰ï¼‰ï¼Œå¹¶é€šè¿‡ç»Ÿä¸€çš„æ¥å£ `operator()` è°ƒç”¨å®ƒä»¬ã€‚
 å®ƒå®ç°äº† *ç±»å‹æ“¦é™¤ï¼ˆtype erasureï¼‰*ï¼šå¤–ç•ŒåªçŸ¥é“â€œå¯ä»¥è¿™æ ·è°ƒç”¨ `R(Args...)`â€ï¼Œä¸éœ€è¦çŸ¥é“ç›’å­é‡Œå…·ä½“è£…çš„æ˜¯ä»€ä¹ˆç±»å‹ã€‚

# æ„ä¹‰ / ä¸ºä»€ä¹ˆè¦ç”¨å®ƒ

- **ç»Ÿä¸€æ¥å£**ï¼šæŠŠä¸åŒæ¥æºã€ä¸åŒå½¢å¼çš„å¯è°ƒç”¨å¯¹è±¡éƒ½å½“ä½œåŒä¸€ç§ç±»å‹ä¼ é€’å’Œå­˜å‚¨ï¼ˆæ¯”å¦‚å›è°ƒã€äº‹ä»¶å¤„ç†ã€å‘½ä»¤é˜Ÿåˆ—ç­‰ï¼‰ã€‚
- **è§£è€¦**ï¼šAPI æ¥å— `std::function`ï¼Œè°ƒç”¨æ–¹å¯ä»¥ä¼ æ™®é€šå‡½æ•°ã€lambdaã€bind è¡¨è¾¾å¼æˆ–ä»¿å‡½æ•°ï¼Œè°ƒç”¨è€…å’Œå®ç°è€…ä¸å†è€¦åˆå…·ä½“ç±»å‹ã€‚
- **å®¹å™¨/æˆå‘˜å­˜å‚¨**ï¼šå¯ä»¥æŠŠå„ç§å¯è°ƒç”¨å¯¹è±¡æ”¾åˆ°å®¹å™¨é‡Œæˆ–ä½œä¸ºç±»æˆå‘˜ä¿å­˜ï¼Œç¨åå†è°ƒç”¨ã€‚

# ä½•æ—¶ç”¨ vs ä¸ç”¨

ç”¨ï¼š

- éœ€è¦ä»¥è¿è¡Œæ—¶å¤šæ€/åŠ¨æ€æ›¿æ¢å›è°ƒæ—¶ï¼ˆä¾‹å¦‚ GUI äº‹ä»¶ã€å¼‚æ­¥å›è°ƒã€ç­–ç•¥åˆ‡æ¢ï¼‰ã€‚
- å›è°ƒ/æ¥å£è¦æ±‚ä¸åŒè°ƒç”¨è€…ä¼ å…¥ä¸åŒå®ç°ï¼Œä½†è°ƒç”¨æ–¹åªå…³å¿ƒç­¾åã€‚

ä¸ç”¨ï¼ˆæˆ–æ…ç”¨ï¼‰ï¼š

- çƒ­è·¯å¾„æ€§èƒ½æ•æ„Ÿå¤„ï¼š`std::function` æœ‰ä¸€å®šå¼€é”€ï¼ˆç±»å‹æ“¦é™¤ã€å¯èƒ½çš„å †åˆ†é…ï¼‰ã€‚
- å¦‚æœå¯ä»¥ç”¨æ¨¡æ¿ï¼ˆ`template<typename F> void foo(F f)`ï¼‰åšåˆ°ç¼–è¯‘æœŸå¤šæ€å¹¶å†…è”ï¼Œé‚£é€šå¸¸æ›´å¿«ã€æ›´ä¼˜ï¼ˆé¿å…è¿è¡Œæ—¶å¼€é”€ï¼‰ã€‚
- æƒ³ä¿å­˜**move-only**å¯è°ƒç”¨å¯¹è±¡ï¼ˆæ³¨æ„ä¸‹é¢çš„é™åˆ¶ï¼‰ã€‚

# åŸºæœ¬ç”¨æ³•ï¼ˆç¤ºä¾‹ï¼‰

```
#include <functional>
#include <iostream>

int add(int a, int b) { return a + b; }

int main() {
    // ä¿å­˜æ™®é€šå‡½æ•°
    std::function<int(int,int)> f1 = add;
    std::cout << f1(2,3) << "\n"; // 5

    // ä¿å­˜ lambda
    std::function<int(int,int)> f2 = [](int x, int y){ return x * y; };
    std::cout << f2(4,5) << "\n"; // 20

    // ä¿å­˜æ— å‚å‡½æ•°
    std::function<void()> f3 = [](){ std::cout << "hello\n"; };
    f3();

    return 0;
}
```

# å¸¸è§åœºæ™¯ç¤ºä¾‹

## 1. å›è°ƒï¼ˆCallbackï¼‰

```
void set_callback(std::function<void(int)> cb);

set_callback([](int code){ std::cout << "code=" << code << "\n"; });
```

## 2. ä¿å­˜åˆ°å®¹å™¨

```
std::vector<std::function<void()>> tasks;
tasks.push_back([](){ std::cout << "task1\n"; });
tasks.push_back([](){ std::cout << "task2\n"; });
for (auto &t : tasks) t();
```

## 3. ç»‘å®šæˆå‘˜å‡½æ•°

ä¸¤ç§æ–¹å¼å¸¸ç”¨ï¼š`std::bind` æˆ– ç”¨ lambda åŒ…è£…ï¼ˆæ¨è lambdaï¼Œæ›´æ¸…æ™°ï¼‰ï¼š

```
struct Foo {
    void method(int x) { std::cout << "Foo::" << x << "\n"; }
};

Foo foo;
std::function<void(int)> cb1 = std::bind(&Foo::method, &foo, std::placeholders::_1);

// æ¨èï¼šç”¨ lambda
std::function<void(int)> cb2 = [&foo](int x){ foo.method(x); };
```

## 4. è¿”å›ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡

```
std::function<int(int)> make_adder(int a) {
    return [a](int b){ return a + b; };
}

auto add5 = make_adder(5);
std::cout << add5(3); // 8
```

# `std::function` çš„ API è¦ç‚¹

- `operator()`ï¼šè°ƒç”¨è¢«åŒ…è£…çš„å¯è°ƒç”¨å¯¹è±¡ï¼ˆè¡Œä¸ºä¸ç›®æ ‡å¯¹è±¡ä¸€è‡´ï¼Œè°ƒç”¨æ—¶ä¼šè½¬å‘å¼‚å¸¸ï¼‰ã€‚
- `operator bool()`ï¼šå¯ä»¥æ£€æŸ¥æ˜¯å¦åŒ…è£…äº†æœ‰æ•ˆç›®æ ‡ï¼ˆæ˜¯å¦ä¸ºç©ºï¼‰ã€‚
- `target_type()` / `target<T>()`ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶å°è¯•è·å–å†…éƒ¨çœŸå®ç±»å‹ï¼ˆä½†ä¸€èˆ¬ä¸å¸¸ç”¨ï¼Œä¸”æœ‰å±€é™ï¼‰ã€‚
- `swap`ã€æ‹·è´ã€èµ‹å€¼ï¼š`std::function` å¯æ‹·è´ï¼ˆå¦‚æœå†…éƒ¨å¯è°ƒç”¨å¯¹è±¡æ˜¯å¯æ‹·è´çš„ï¼‰ã€‚
- ç©ºçŠ¶æ€ï¼šé»˜è®¤æ„é€ ä¼šå¾—åˆ°ç©ºçš„ `std::function`ï¼Œè°ƒç”¨ç©ºçš„ `std::function` ä¼šæŠ› `std::bad_function_call`ã€‚

ä¾‹ï¼š

```
std::function<void()> f;
if (f) { f(); } // safe check
else { /* æ²¡æœ‰ç›®æ ‡ */ }
```

2.bind

`std::bind` å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒåœ¨è°ƒç”¨æ—¶ä¼šå°†ç»™å®šçš„å‚æ•°ç»‘å®šåˆ°ä¸€ä¸ªå‡½æ•°æˆ–å‡½æ•°å¯¹è±¡ã€‚

```cpp
#include <iostream>
#include <functional>

int add(int a, int b) {
  return a + b;
}

int main() {
  auto bound_add = std::bind(add, 5, std::placeholders::_1);
  std::cout << bound_add(10) << std::endl; // è¾“å‡º: 15

  return 0;
}
```

## ğŸ§© ä¸€ã€`std::bind` æ˜¯ä»€ä¹ˆï¼Ÿ

`std::bind` æ˜¯ `<functional>` å¤´æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œç”¨æ¥**â€œç»‘å®šâ€ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ã€å‡½æ•°æŒ‡é’ˆã€æˆå‘˜å‡½æ•°ã€lambdaã€ä»¿å‡½æ•°ç­‰ï¼‰çš„ä¸€éƒ¨åˆ†å‚æ•°**ï¼Œ
 ä»è€Œç”Ÿæˆä¸€ä¸ªæ–°çš„**å¯è°ƒç”¨å¯¹è±¡**ï¼ˆé€šå¸¸å«â€œç»‘å®šå™¨â€ï¼‰ã€‚

ç®€å•æ¥è¯´ï¼Œå®ƒèƒ½è®©ä½ æå‰å›ºå®šï¼ˆæˆ–é‡æ–°æ’åˆ—ï¼‰å‡½æ•°çš„æŸäº›å‚æ•°ï¼Œè®©ç”Ÿæˆçš„å¯¹è±¡æ›´å®¹æ˜“åœ¨ç®—æ³•æˆ–å›è°ƒä¸­ä½¿ç”¨ã€‚

------

## ğŸ§  äºŒã€ä¸ºä»€ä¹ˆéœ€è¦ `std::bind`

åœ¨ç°ä»£ C++ ä¹‹å‰ï¼ˆC++11 ä¹‹å‰ï¼‰ï¼Œlambda è¡¨è¾¾å¼è¿˜æ²¡æœ‰å‡ºç°ï¼Œè€Œå¾ˆå¤š STL ç®—æ³•éœ€è¦ä¼ å…¥**ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°å¯¹è±¡**ã€‚

æ¯”å¦‚ä½ æœ‰ä¸ªå‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä½†ç®—æ³•åªèƒ½ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ—¶ `std::bind` å°±èƒ½â€œç»‘å®šâ€å…¶ä¸­ä¸€ä¸ªå‚æ•°ï¼Œå˜æˆä¸€ä¸ªåªéœ€è¦ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ã€‚

------

## âš™ï¸ ä¸‰ã€è¯­æ³•æ ¼å¼

```
#include <functional>

auto new_func = std::bind(callable, arg1, arg2, ...);
```

- `callable`ï¼šä½ è¦ç»‘å®šçš„å‡½æ•°æˆ–å¯è°ƒç”¨å¯¹è±¡ã€‚
- `arg1, arg2, ...`ï¼šè¦ç»‘å®šçš„å‚æ•°ã€‚
  - å¦‚æœä½ ç”¨ `_1`, `_2`, `_3` ç­‰å ä½ç¬¦ï¼ˆæ¥è‡ª `std::placeholders`ï¼‰ï¼Œè¡¨ç¤ºâ€œè°ƒç”¨æ—¶å†ä¼ å…¥è¿™äº›ä½ç½®çš„å‚æ•°â€ã€‚

------

## ğŸ§© å››ã€ä¾‹å­è®²è§£

### ä¾‹å­ 1ï¼šç»‘å®šæ™®é€šå‡½æ•°

```cpp
#include <iostream>
#include <functional>
using namespace std;

void greet(string name, int times) {
    for (int i = 0; i < times; ++i)
        cout << "Hello, " << name << "!" << endl;
}

int main() {
    // ç»‘å®šç¬¬äºŒä¸ªå‚æ•°ï¼Œå›ºå®š times = 3
    auto greet3 = bind(greet, placeholders::_1, 3);

    greet3("Alice");
    greet3("Bob");
}
```

ğŸ”¹ **è¾“å‡ºï¼š**

```
Hello, Alice!
Hello, Alice!
Hello, Alice!
Hello, Bob!
Hello, Bob!
Hello, Bob!
```

è¿™é‡Œ `bind` æŠŠ `greet` çš„ç¬¬äºŒä¸ªå‚æ•°å›ºå®šä¸º 3ï¼Œç”Ÿæˆçš„æ–°å‡½æ•° `greet3` åªéœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼ˆ`name`ï¼‰ã€‚

------

### ä¾‹å­ 2ï¼šç»‘å®šæˆå‘˜å‡½æ•°

```cpp
#include <iostream>
#include <functional>
using namespace std;

struct Printer {
    void print(int x) const {
        cout << "Value: " << x << endl;
    }
};

int main() {
    Printer p;

    // ç»‘å®šæˆå‘˜å‡½æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡æŒ‡é’ˆæˆ–å¼•ç”¨
    auto f = bind(&Printer::print, &p, placeholders::_1);
    f(42);
}
```

ğŸ”¹ **è¾“å‡ºï¼š**

```
Value: 42
```

è¿™é‡Œ `bind` è®© `f` æˆä¸ºäº†ä¸€ä¸ªâ€œæ™®é€šå‡½æ•°å¯¹è±¡â€ï¼Œè™½ç„¶å®ƒå†…éƒ¨å®é™…è°ƒç”¨äº† `p.print(42)`ã€‚

------

### ä¾‹å­ 3ï¼šå‚æ•°é‡æ’

```cpp
#include <iostream>
#include <functional>
using namespace std;

void show(int a, int b, int c) {
    cout << a << " " << b << " " << c << endl;
}

int main() {
    // æ”¹å˜å‚æ•°é¡ºåº
    auto reorder = bind(show, placeholders::_2, 10, placeholders::_1);
    reorder(1, 2); // _1 = 1, _2 = 2
}
```

ğŸ”¹ **è¾“å‡ºï¼š**

```
2 10 1
```

è¯´æ˜ï¼š

- `_2` â†’ ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®ä¸Šæ”¾è°ƒç”¨æ—¶ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚
- `_1` â†’ ç¬¬ä¸‰ä¸ªå‚æ•°ä½ç½®ä¸Šæ”¾è°ƒç”¨æ—¶ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
- ä¸­é—´çš„ `10` æ˜¯å›ºå®šå€¼ã€‚

------

## ğŸ”§ äº”ã€ä½¿ç”¨åœºæ™¯

1. **åœ¨ STL ç®—æ³•ä¸­ä½¿ç”¨**

   ```
   vector<int> v = {1, 2, 3, 4, 5};
   for_each(v.begin(), v.end(), bind(greet, "Tom", placeholders::_1));
   ```

   å¯æŠŠåŸæœ¬éœ€è¦ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°æ”¹é€ æˆåªæ¥å—ä¸€ä¸ªå‚æ•°çš„å½¢å¼ã€‚

2. **ç»‘å®šæˆå‘˜å‡½æ•°åˆ°å›è°ƒç³»ç»Ÿ**

   - åœ¨ GUI æ¡†æ¶ã€çº¿ç¨‹åº“ä¸­ç»å¸¸éœ€è¦æŠŠæˆå‘˜å‡½æ•°ä¼ ç»™å›è°ƒï¼Œä½†å®ƒä»¬å¾€å¾€è¦æ±‚ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚
   - ç”¨ `std::bind(&Class::method, &object, placeholders::_1)` å°±èƒ½è§£å†³ã€‚

3. **æ—§é¡¹ç›®ä¸­æ›¿ä»£ lambdaï¼ˆåœ¨ C++11 ä»¥å‰ï¼‰**

   - ç°åœ¨ lambda æ›´çµæ´»ï¼Œå†™æ³•æ›´æ¸…æ™°ï¼Œä½†ç†è§£ `bind` ä»ç„¶æœ‰åŠ©äºé˜…è¯»è€ä»£ç ã€‚

åŸºæœ¬çš„ç®—æœ¯æ“ä½œï¼šplus`ã€`std::minus`ã€`std::multiplies`ã€`std::divides`ã€`std::modulus

## ğŸ§© ä¸€ã€å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™äº›ç±»å‹å…¶å®æ˜¯**å‡½æ•°å¯¹è±¡ç±»æ¨¡æ¿ï¼ˆfunction object classesï¼‰**ï¼Œå®šä¹‰åœ¨ `<functional>` é‡Œã€‚
 æ¯”å¦‚ï¼š

```
template<class T>
struct plus {
    constexpr T operator()(const T& lhs, const T& rhs) const {
        return lhs + rhs;
    }
};
```

è¿™æ„å‘³ç€ï¼š
 `std::plus<int>` æ˜¯ä¸€ä¸ª**å¯¹è±¡ç±»å‹**ï¼Œè¿™ä¸ªå¯¹è±¡**é‡è½½äº† `()` è¿ç®—ç¬¦**ï¼Œæ‰€ä»¥ä½ å¯ä»¥æŠŠå®ƒå½“ä½œå‡½æ•°æ¥ç”¨ã€‚

------

## ğŸ§  äºŒã€ä¸ºä»€ä¹ˆè¦æœ‰å®ƒä»¬ï¼Ÿ

åœ¨ STL ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æŠŠæ“ä½œï¼ˆæ¯”å¦‚â€œåŠ æ³•â€ã€â€œä¹˜æ³•â€ï¼‰å½“ä½œå‚æ•°ä¼ ç»™ç®—æ³•ï¼Œæ¯”å¦‚ `std::accumulate()`ã€`std::transform()`ã€‚
 ä½† C++ é‡Œï¼Œ`+`ã€`-` è¿™äº›è¿ç®—ç¬¦ä¸èƒ½ç›´æ¥ä½œä¸ºå‡½æ•°ä¼ é€’ã€‚
 äºæ˜¯ `<functional>` å°±æä¾›äº†è¿™äº›â€œå‡½æ•°å¯¹è±¡â€æ¥ä»£æ›¿ã€‚

------

## âš™ï¸ ä¸‰ã€å¸¸ç”¨çš„ç®—æœ¯å‡½æ•°å¯¹è±¡

| åç§°                 | å¯¹åº”è¿ç®—ç¬¦ | ç¤ºä¾‹ç»“æœ                             |
| -------------------- | ---------- | ------------------------------------ |
| `std::plus<T>`       | `+`        | `plus<int>()(3, 4)` â†’ 7              |
| `std::minus<T>`      | `-`        | `minus<int>()(10, 2)` â†’ 8            |
| `std::multiplies<T>` | `*`        | `multiplies<int>()(2, 3)` â†’ 6        |
| `std::divides<T>`    | `/`        | `divides<double>()(10.0, 4.0)` â†’ 2.5 |
| `std::modulus<T>`    | `%`        | `modulus<int>()(10, 3)` â†’ 1          |

------

## ğŸ§© å››ã€åŸºæœ¬ç”¨æ³•ç¤ºä¾‹

```cpp
#include <iostream>
#include <functional>
using namespace std;

int main() {
    cout << std::plus<int>()(3, 5) << endl;        // 8
    cout << std::minus<int>()(10, 4) << endl;      // 6
    cout << std::multiplies<int>()(2, 3) << endl;  // 6
    cout << std::divides<double>()(7.5, 2.5) << endl; // 3.0
    cout << std::modulus<int>()(10, 3) << endl;    // 1
}
```

------

## ğŸ§® äº”ã€åœ¨ç®—æ³•ä¸­çš„ä½¿ç”¨åœºæ™¯

### 1ï¸âƒ£ ç´¯åŠ æ±‚å’Œ (`std::accumulate`)

```cpp
#include <iostream>
#include <vector>
#include <numeric>     // accumulate
#include <functional>  // plus
using namespace std;

int main() {
    vector<int> v = {1, 2, 3, 4, 5};
    int sum = accumulate(v.begin(), v.end(), 0, std::plus<int>());
    cout << sum << endl;  // è¾“å‡º 15
}
```

è¯´æ˜ï¼š
 `accumulate` é»˜è®¤ä¹Ÿæ˜¯ç”¨ `+` è¿ç®—ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ï¼Œæ¯”å¦‚æ¢æˆ `std::multiplies<int>()` å®ç°â€œè¿ä¹˜ç§¯â€ï¼š

```
int product = accumulate(v.begin(), v.end(), 1, std::multiplies<int>());
cout << product << endl; // è¾“å‡º 120
```

------

### 2ï¸âƒ£ å…ƒç´ è¿ç®— (`std::transform`)

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <functional>
using namespace std;

int main() {
    vector<int> a = {1, 2, 3};
    vector<int> b = {4, 5, 6};
    vector<int> result(3);

    transform(a.begin(), a.end(), b.begin(), result.begin(), std::plus<int>());
    // result = {5, 7, 9}

    for (int n : result)
        cout << n << " ";
}
```

ğŸ”¹ `std::transform` ç¬¬äº”ä¸ªå‚æ•°æ˜¯â€œäºŒå…ƒæ“ä½œâ€ï¼Œè¿™é‡Œç”¨ `std::plus<int>()` æ¥å®ç°â€œä¸¤ä¸ªå‘é‡å¯¹åº”å…ƒç´ ç›¸åŠ â€ã€‚

æ¯”è¾ƒæ“ä½œ

## ğŸ§© ä¸€ã€å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™äº›éƒ½å®šä¹‰åœ¨ `<functional>` å¤´æ–‡ä»¶ä¸­ï¼Œæ˜¯æ¨¡æ¿ç±»ï¼Œç”¨äºå°è£…å¸¸è§çš„**æ¯”è¾ƒè¿ç®—ç¬¦**ï¼š

| åç§°                    | å¯¹åº”è¿ç®—ç¬¦ | ä½œç”¨                     |
| ----------------------- | ---------- | ------------------------ |
| `std::equal_to<T>`      | `==`       | åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰       |
| `std::not_equal_to<T>`  | `!=`       | åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰     |
| `std::greater<T>`       | `>`        | åˆ¤æ–­å·¦å€¼æ˜¯å¦å¤§äºå³å€¼     |
| `std::less<T>`          | `<`        | åˆ¤æ–­å·¦å€¼æ˜¯å¦å°äºå³å€¼     |
| `std::greater_equal<T>` | `>=`       | åˆ¤æ–­å·¦å€¼æ˜¯å¦å¤§äºç­‰äºå³å€¼ |
| `std::less_equal<T>`    | `<=`       | åˆ¤æ–­å·¦å€¼æ˜¯å¦å°äºç­‰äºå³å€¼ |

------

## âš™ï¸ äºŒã€å†…éƒ¨ç»“æ„ï¼ˆä»¥ `std::less` ä¸ºä¾‹ï¼‰

è¿™äº›å‡½æ•°å¯¹è±¡çš„å®ç°éƒ½å¾ˆç®€å•ï¼Œæ¯”å¦‚ `std::less`ï¼š

```
template <class T>
struct less {
    constexpr bool operator()(const T& lhs, const T& rhs) const {
        return lhs < rhs;
    }
};
```

æ¢å¥è¯è¯´ï¼Œ
 `std::less<int>()(3, 5)`
 ç­‰ä»·äº
 `3 < 5`ã€‚

------

## ğŸ§  ä¸‰ã€ä¸ºä»€ä¹ˆè¦æœ‰å®ƒä»¬ï¼Ÿ

åœ¨ STL ä¸­ï¼Œç®—æ³•å’Œå®¹å™¨å¸¸å¸¸è¦æ¥å—â€œæ¯”è¾ƒé€»è¾‘â€ä½œä¸ºæ¨¡æ¿å‚æ•°æˆ–æ„é€ å‚æ•°ã€‚

ğŸ‘‰ æ¯”å¦‚ï¼š

- `std::sort()` å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼›
- `std::map` / `std::set` ç”¨æ¯”è¾ƒå‡½æ•°å†³å®šæ’åºé¡ºåºï¼›
- `std::priority_queue` ä¹Ÿéœ€è¦æ¯”è¾ƒå‡½æ•°å®šä¹‰â€œå †é¡¶è§„åˆ™â€ã€‚

è¿™äº›åœ°æ–¹éƒ½éœ€è¦ä¸€ä¸ªâ€œ**å¯è°ƒç”¨å¯¹è±¡**â€æ¥è¡¨ç¤ºæ¯”è¾ƒé€»è¾‘ï¼Œè€Œ `<functional>` å°±æä¾›äº†é€šç”¨çš„æ ‡å‡†å®ç°ã€‚

------

## ğŸ’¡ å››ã€åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹

```cpp
#include <iostream>
#include <functional>
using namespace std;

int main() {
    cout << std::equal_to<int>()(3, 3) << endl;       // true
    cout << std::not_equal_to<int>()(3, 4) << endl;   // true
    cout << std::greater<int>()(5, 3) << endl;        // true
    cout << std::less<int>()(2, 8) << endl;           // true
    cout << std::greater_equal<int>()(5, 5) << endl;  // true
    cout << std::less_equal<int>()(3, 4) << endl;     // true
}
```

è¾“å‡ºï¼ˆå¸ƒå°”å€¼è½¬æˆ 1/0ï¼‰ï¼š

```
1
1
1
1
1
1
```

------

## ğŸ”§ äº”ã€åœ¨ STL ç®—æ³•ä¸­çš„åº”ç”¨

### 1ï¸âƒ£ `std::sort` æ’åºç¤ºä¾‹

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <functional>
using namespace std;

int main() {
    vector<int> v = {5, 2, 8, 3, 1};

    sort(v.begin(), v.end(), std::less<int>());   // å‡åº
    // sort(v.begin(), v.end(), std::greater<int>()); // é™åº

    for (int n : v) cout << n << " ";
}
```

è¾“å‡ºï¼š

```
1 2 3 5 8
```

------

### 2ï¸âƒ£ `std::map`ã€`std::set` çš„æ’åºè§„åˆ™

STL çš„æœ‰åºå…³è”å®¹å™¨é»˜è®¤ä½¿ç”¨ `std::less` ä½œä¸ºæ¯”è¾ƒæ–¹å¼ã€‚

```cpp
#include <map>
#include <iostream>
using namespace std;

int main() {
    map<int, string, std::greater<int>> m; // æ”¹æˆé™åºæ’åˆ—
    m[1] = "one";
    m[3] = "three";
    m[2] = "two";

    for (auto& [k, v] : m)
        cout << k << ": " << v << endl;
}
```

è¾“å‡ºï¼š

```
3: three
2: two
1: one
```

ğŸ”¹ è¯´æ˜ï¼š
 `map<int, string, greater<int>>` ä¸­ï¼Œé”®çš„æ¯”è¾ƒè§„åˆ™ç”± `greater<int>` å†³å®šã€‚
 å¦‚æœä¸å†™ï¼Œé»˜è®¤æ˜¯ `less<int>`ï¼ˆå‡åºï¼‰ã€‚

------

### 3ï¸âƒ£ `std::max_element`ã€`std::min_element`

è¿™äº›ç®—æ³•ä¹Ÿå¯ä»¥ä¼ å…¥æ¯”è¾ƒå¯¹è±¡ï¼š

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <functional>
using namespace std;

int main() {
    vector<int> v = {10, 30, 20};

    auto max_it = max_element(v.begin(), v.end(), std::less<int>());  // é»˜è®¤å°±æ˜¯less
    auto min_it = min_element(v.begin(), v.end(), std::less<int>());

    cout << "max = " << *max_it << ", min = " << *min_it << endl;
}
```

------

## ğŸ§® å…­ã€å®ƒä»¬ä¸ Lambda å¯¹æ¯”

| ç‰¹æ€§             | å‡½æ•°å¯¹è±¡ï¼ˆå¦‚ `std::less`ï¼‰ | Lambda                            |
| ---------------- | -------------------------- | --------------------------------- |
| å¯è¯»æ€§           | ç®€æ´ã€é€šç”¨                 | æ›´çµæ´»ã€æ›´æ˜“è¯»                    |
| æ³›å‹æ€§           | æ¨¡æ¿åŒ–ã€å¯ç›´æ¥ç”¨äºä»»æ„ç±»å‹ | éœ€è¦æ³›å‹ lambdaï¼ˆC++14+ï¼‰         |
| ç”¨äºå®¹å™¨æ¨¡æ¿å‚æ•° | âœ… æ¨èä½¿ç”¨                 | âŒ ä¸æ”¯æŒï¼ˆlambda æ— é»˜è®¤æ„é€ å‡½æ•°ï¼‰ |
| ç®—æ³•ä¸­ä¸´æ—¶ä½¿ç”¨   | âœ… å¯è¡Œ                     | âœ… æ›´æ–¹ä¾¿                          |

# 4.`numeric`åº“

## å¸¸ç”¨å‡½æ•°

### 1. `accumulate`

`accumulate` å‡½æ•°ç”¨äºè®¡ç®—å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ€»å’Œã€‚å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå®¹å™¨çš„å¼€å§‹è¿­ä»£å™¨ã€ç»“æŸè¿­ä»£å™¨å’Œåˆå§‹å€¼ã€‚

**è¯­æ³•**:

```
template <InputIterator Iter, class T>
T accumulate(Iter first, Iter last, T init);
```

**å®ä¾‹**:

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>
#include <vector>

int main() {
  std::vector<int> v = {1, 2, 3, 4, 5};
  int sum = std::accumulate(v.begin(), v.end(), 0);
  std::cout << "Sum: " << sum << std::endl; // è¾“å‡º: Sum: 15
  return 0;
}
```

### 2. `inner_product`

`inner_product` å‡½æ•°ç”¨äºè®¡ç®—ä¸¤ä¸ªå®¹å™¨ä¸­å¯¹åº”å…ƒç´ ä¹˜ç§¯çš„æ€»å’Œã€‚

**è¯­æ³•**:

```
template <InputIterator1 Iter1, InputIterator2 Iter2, class T>
T inner_product(Iter1 first1, Iter1 last1, Iter2 first2, T init);
```

**å®ä¾‹**:

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>
#include <vector>

int main() {
  std::vector<int> v1 = {1, 2, 3};
  std::vector<int> v2 = {4, 5, 6};
  int product_sum = std::inner_product(v1.begin(), v1.end(), v2.begin(), 0);
  std::cout << "Product Sum: " << product_sum << std::endl; // è¾“å‡º: Product Sum: 32
  return 0;
}
```

### 3. `partial_sum`

`partial_sum` å‡½æ•°ç”¨äºè®¡ç®—å®¹å™¨ä¸­å…ƒç´ çš„éƒ¨åˆ†å’Œï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨å¦ä¸€ä¸ªå®¹å™¨ä¸­ã€‚

**è¯­æ³•**:

```
template <InputIterator InIter, OutputIterator OutIter>
OutIter partial_sum(InIter first, InIter last, OutIter result);
```

**å®ä¾‹**:

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>
#include <vector>

int main() {
  std::vector<int> v = {1, 2, 3, 4};
  std::vector<int> result(v.size());
  std::partial_sum(v.begin(), v.end(), result.begin());
  for (int i : result) {
    std::cout << i << " "; // è¾“å‡º: 1 3 6 10
  }
  return 0;
}
```

### 4. `adjacent_difference`

`adjacent_difference` å‡½æ•°ç”¨äºè®¡ç®—å®¹å™¨ä¸­ç›¸é‚»å…ƒç´ çš„å·®å€¼ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨å¦ä¸€ä¸ªå®¹å™¨ä¸­ã€‚

**è¯­æ³•**:

```
template <InputIterator InIter, OutputIterator OutIter>
OutIter adjacent_difference(InIter first, InIter last, OutIter result);
```

**å®ä¾‹**:

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>
#include <vector>

int main() {
  std::vector<int> v = {1, 2, 3, 4};
  std::vector<int> result(v.size() - 1);
  std::adjacent_difference(v.begin(), v.end(), result.begin());
  for (int i : result) {
    std::cout << i << " "; // è¾“å‡º: 1 1 1
  }
  return 0;
}
```

### 5. std::gcd

ä½¿ç”¨ std::gcd è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼š

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>

int main() {
  int a = 48;
  int b = 18;
  int result = std::gcd(a, b); // è®¡ç®— 48 å’Œ 18 çš„æœ€å¤§å…¬çº¦æ•°
  std::cout << "GCD: " << result << std::endl; // è¾“å‡º 6
  return 0;
}
```

### 6. std::lcm

ä½¿ç”¨ std::lcm è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„æœ€å°å…¬å€æ•°ï¼š

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>

int main() {
  int a = 48;
  int b = 18;
  int result = std::lcm(a, b); // è®¡ç®— 48 å’Œ 18 çš„æœ€å°å…¬å€æ•°
  std::cout << "LCM: " << result << std::endl; // è¾“å‡º 144
  return 0;
}
```

### 7. std::iota

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>  // åŒ…å« numeric å¤´æ–‡ä»¶
#include <vector>

int main() {
  std::vector<int> v(5); // åˆ›å»ºä¸€ä¸ªåŒ…å«5ä¸ªå…ƒç´ çš„å‘é‡

  // ä½¿ç”¨ std::iota å¡«å……å‘é‡ï¼Œèµ·å§‹å€¼ä¸º1
  std::iota(std::begin(v), std::end(v), 1);

  // è¾“å‡ºå¡«å……åçš„å‘é‡
  for (int i : v) {
    std::cout << i << " ";
  }
  std::cout << std::endl; // è¾“å‡º: 1 2 3 4 5

  return 0;
}
```

ä½¿ç”¨ std::iota å¡«å……èŒƒå›´å†…çš„åºåˆ—å€¼ã€‚

```
template<class ForwardIt, class T>
void iota(ForwardIt first, ForwardIt last, T value);
```

### 8.æŸ¥æ‰¾æœ€å¤§å€¼ä¸æœ€å°å€¼

`min_element` å’Œ `max_element` å‡½æ•°ç”¨äºæ‰¾åˆ°å®¹å™¨ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚

## å®ä¾‹

```cpp
#include <iostream>
#include <numeric>
#include <vector>
#include <algorithm> // ä¸ºäº†ä½¿ç”¨ std::min_element å’Œ std::max_element

int main() {
  // å®šä¹‰ä¸€ä¸ªåŒ…å«æ•´æ•°çš„å‘é‡
  std::vector<int> v = {3, 1, 4, 1, 5, 9};

  // è®¡ç®—æœ€å°å€¼å’Œæœ€å¤§å€¼
  int min_val = *std::min_element(v.begin(), v.end());
  int max_val = *std::max_element(v.begin(), v.end());

  // è®¡ç®—æ€»å’Œ
  int sum_val = std::accumulate(v.begin(), v.end(), 0);

  // è®¡ç®—å¹³å‡å€¼
  double avg_val = static_cast<double>(sum_val) / v.size();

  // è¾“å‡ºç»“æœ
  std::cout << "Min: " << min_val << std::endl;
  std::cout << "Max: " << max_val << std::endl;
  std::cout << "Sum: " << sum_val << std::endl;
  std::cout << "Average: " << avg_val << std::endl;

  return 0;
}
```

è¾“å‡ºç»“æœä¸ºï¼š

```
Min: 1
Max: 9
Sum: 23
Average: 3.83333
```

# 5.`complex`åº“

å¤„ç†è´Ÿæ•°ï¼Œ

```cpp
#include <iostream>
#include <complex>  // å¤æ•°å¤´æ–‡ä»¶

int main() {
  std::complex<double> z1(3.0, 4.0); // 3 + 4i
  std::complex<double> z2(1.0, -2.0); // 1 - 2i

  std::cout << "z1 = " << z1 << std::endl;
  std::cout << "z2 = " << z2 << std::endl;
}
```

è¾“å‡ºï¼š

```
z1 = (3,4)
z2 = (1,-2)
```

## åŸºæœ¬è¯­æ³•

### åˆ›å»ºå¤æ•°

```
std::complex<double> c(5.0, 3.0); // åˆ›å»ºä¸€ä¸ªå¤æ•° 5 + 3i
```

### è®¿é—®å®éƒ¨å’Œè™šéƒ¨

```
double realPart = c.real(); // è·å–å®éƒ¨
double imagPart = c.imag(); // è·å–è™šéƒ¨
```

### å¤æ•°çš„åŸºæœ¬è¿ç®—

C++ æ ‡å‡†åº“ `<complex>` æ”¯æŒä»¥ä¸‹åŸºæœ¬è¿ç®—ï¼š

- åŠ æ³•ï¼š`operator+`
- å‡æ³•ï¼š`operator-`
- ä¹˜æ³•ï¼š`operator*`
- é™¤æ³•ï¼š`operator/`
- å…±è½­ï¼š`conj`
- æ¨¡ï¼š`abs`
- è¾è§’ï¼š`arg`

**1 ã€è·å–å®éƒ¨å’Œè™šéƒ¨**

```
std::cout << "å®éƒ¨: " << z1.real() << std::endl; // 3
std::cout << "è™šéƒ¨: " << z1.imag() << std::endl; // 4
```

**2ã€å››åˆ™è¿ç®—ï¼š**

## å®ä¾‹

```cpp
auto z3 = z1 + z2;  // (4, 2)
auto z4 = z1 - z2;  // (2, 6)
auto z5 = z1 * z2;  // (11, -2)
auto z6 = z1 / z2;  // (-1, 2)

std::cout << "z1 + z2 = " << z3 << std::endl;
std::cout << "z1 * z2 = " << z5 << std::endl;
```

**3ã€å¸¸ç”¨å‡½æ•°**

å¤´æ–‡ä»¶ `<complex>` æä¾›äº†å¾ˆå¤šå’Œå¤æ•°ç›¸å…³çš„æ•°å­¦å‡½æ•°ã€‚

## å®ä¾‹

```cpp
#include <cmath>  // éƒ¨åˆ†æ•°å­¦å‡½æ•°éœ€è¦

std::cout << "æ¨¡é•¿ |z1| = " << std::abs(z1) << std::endl;   // 5
std::cout << "å¹…è§’ arg(z1) = " << std::arg(z1) << std::endl; // 0.927 (å¼§åº¦)
std::cout << "å…±è½­ conjugate(z1) = " << std::conj(z1) << std::endl; // (3,-4)
std::cout << "exp(z1) = " << std::exp(z1) << std::endl;    // e^(3+4i)
std::cout << "sin(z1) = " << std::sin(z1) << std::endl;
std::cout << "cos(z1) = " << std::cos(z1) << std::endl;
```

**4ã€æåæ ‡è¡¨ç¤º**

æœ‰æ—¶æˆ‘ä»¬éœ€è¦ç”¨ æåæ ‡ï¼ˆæ¨¡é•¿ + ç›¸è§’ï¼‰ è¡¨ç¤ºå¤æ•°ã€‚

## å®ä¾‹

```cpp
// ä»æåæ ‡ç”Ÿæˆå¤æ•°
double r = 5.0;      // æ¨¡é•¿
double theta = M_PI / 4; // 45 åº¦
std::complex<double> z = std::polar(r, theta);

std::cout << "æåæ ‡å¤æ•° z = " << z << std::endl; // (3.53553,3.53553)
```

#### 5ã€æ¨¡æ¿å‚æ•°

`std::complex<T>` æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œæ”¯æŒä¸åŒçš„æ•°å€¼ç±»å‹ï¼š

- `std::complex<float>`
- `std::complex<double>`ï¼ˆå¸¸ç”¨ï¼‰
- `std::complex<long double>`

## å®ä¾‹

```cpp
std::complex<float> zf(1.0f, 2.0f);
std::complex<double> zd(1.0, 2.0);
```

## å®ä¾‹

ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ `<complex>` å¤´æ–‡ä»¶çš„ç®€å•ç¤ºä¾‹ï¼ŒåŒ…æ‹¬åˆ›å»ºå¤æ•°ã€åŸºæœ¬è¿ç®—å’Œè¾“å‡ºç»“æœã€‚

## å®ä¾‹

```cpp
#include <iostream>
#include <complex>

int main() {
  // åˆ›å»ºä¸¤ä¸ªå¤æ•°
  std::complex<double> c1(5.0, 3.0);  // 5 + 3i
  std::complex<double> c2(2.0, -4.0); // 2 - 4i

  // è¾“å‡ºå¤æ•°
  std::cout << "c1: " << c1 << std::endl; // (5,3)
  std::cout << "c2: " << c2 << std::endl; // (2,-4)

  // å¤æ•°åŠ æ³•
  std::complex<double> sum = c1 + c2;
  std::cout << "Sum: " << sum << std::endl; // 7 - i

  // å¤æ•°å‡æ³•
  std::complex<double> diff = c1 - c2;
  std::cout << "Difference: " << diff << std::endl; // 3 + 7i

  // å¤æ•°ä¹˜æ³•
  std::complex<double> product = c1 * c2;
  std::cout << "Product: " << product << std::endl; // 22 - 14i

  // å¤æ•°é™¤æ³•
  std::complex<double> quotient = c1 / c2;
  std::cout << "Quotient: " << quotient << std::endl; // -0.1 + 1.3i

  // å¤æ•°çš„å…±è½­
  std::complex<double> conjugate = std::conj(c1);
  std::cout << "Conjugate of c1: " << conjugate << std::endl; // 5 - 3i

  // å¤æ•°çš„æ¨¡
  double modulus = std::abs(c1);
  std::cout << "Modulus of c1: " << modulus << std::endl; // sqrt(34) â‰ˆ 5.83095

  // å¤æ•°çš„è¾è§’ï¼ˆå¼§åº¦åˆ¶ï¼‰
  double argument = std::arg(c1);
  std::cout << "Argument of c1: " << argument << std::endl; // atan(3/5) â‰ˆ 0.54042 rad

  return 0;
}
```

å½“ä½ è¿è¡Œä¸Šè¿°ç¨‹åºæ—¶ï¼Œä½ å°†å¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```
c1: (5,3)
c2: (2,-4)
Sum: (7,-1)
Difference: (3,7)
Product: (22,-14)
Quotient: (-0.1,1.3)
Conjugate of c1: (5,-3)
Modulus of c1: 5.83095
Argument of c1: 0.54042
```